const t=async t=>{try{return await fetch(`https://687bab4eb4bc7cfbda86bede.mockapi.io/posts?page=1&limit=${t}`).then(t=>t.json()).then(t=>{document.querySelector("#postsContainer").innerHTML=t.map(t=>{let e=(t.comments||[]).map(t=>`<li class="comment">${t}</li>`).join("");return`
<div class="post" id="${t.id}">
  <h2>${t.title}</h2>
  <p>${t.text}</p>
  <button class="editPostButton" data-id="${t.id}">\u{420}\u{435}\u{434}\u{430}\u{433}\u{443}\u{432}\u{430}\u{442}\u{438}</button>
  <button class="deletePostButton" data-id="${t.id}">\u{412}\u{438}\u{434}\u{430}\u{43B}\u{438}\u{442}\u{438}</button>
  
  <div class="commentsContainer" data-id="${t.id}">
    <h3>\u{41A}\u{43E}\u{43C}\u{435}\u{43D}\u{442}\u{430}\u{440}\u{456}:</h3>
    <ul class="commentsList">
      ${e}
    </ul>
    <form class="createCommentForm">
      <input type="text" class="commentInput" placeholder="\u{41D}\u{43E}\u{432}\u{438}\u{439} \u{43A}\u{43E}\u{43C}\u{435}\u{43D}\u{442}\u{430}\u{440}" required>
      <button type="submit">\u{414}\u{43E}\u{434}\u{430}\u{442}\u{438} \u{43A}\u{43E}\u{43C}\u{435}\u{43D}\u{442}\u{430}\u{440}</button>
    </form>
  </div>
</div>
    `}).join("")})}catch(t){console.log(t)}},e=async t=>{let e=await fetch(`https://687bab4eb4bc7cfbda86bede.mockapi.io/posts/${t}`);return await e.json()},o=async(t,e)=>{let o={method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}};try{return await fetch(`https://687bab4eb4bc7cfbda86bede.mockapi.io/posts/${t}`,o).then(t=>t.json())}catch(t){console.log(t)}},a=async()=>{let t="",e=document.querySelectorAll(".post").length;await fetch("https://687bab4eb4bc7cfbda86bede.mockapi.io/posts").then(t=>t.json()).then(o=>{console.log(t=o.length),e===t?(document.querySelector(".load").style.visibility="hidden",document.querySelector(".load").style.display="none"):(document.querySelector(".load").style.visibility="visible",document.querySelector(".load").style.display="block")}),console.log(e)};let n=4;const l=async()=>{document.querySelector(".load").addEventListener("click",async()=>{console.log(n+=4),await t(n),await a()})},c=async t=>{try{return await fetch(`https://687bab4eb4bc7cfbda86bede.mockapi.io/posts/${t}`,{method:"DELETE"})}catch(t){console.log(t)}},i=async t=>{let e={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json; charset=UTF-8"}};try{return await fetch("https://687bab4eb4bc7cfbda86bede.mockapi.io/posts",e).then(t=>t.json())}catch(t){console.log(t)}};t(4);let s="";document.querySelector("#postsContainer").addEventListener("click",async t=>{"Редагувати"===t.target.textContent&&(document.querySelector(".edit-backdrop").style.visibility="visible",document.querySelector(".edit-backdrop").style.display="flex",s=t.target.parentElement)}),document.querySelector(".form-edit").addEventListener("submit",async a=>{a.preventDefault();let l=await e(s.id);console.log(s.id);let c={title:a.target.elements.nameEditCollect.value,text:a.target.elements.discriptionEditCollect.value,comments:[l.comments]};document.querySelector(".edit-backdrop").style.visibility="hidden",document.querySelector(".edit-backdrop").style.display="none",await o(s.id,c),await t(n)}),document.querySelector("#postsContainer").addEventListener("click",async e=>{if("Видалити"===e.target.textContent){let o=e.target.parentElement;console.log(o.id),await c(o.id),await t(n),await a()}console.log(e.target.parentElement)}),document.addEventListener("submit",async a=>{if(a.target.matches(".createCommentForm")){a.preventDefault();let l=a.target.elements[0].value;console.log(l);let c=a.target.parentElement.parentElement.id;console.log(c);let i=await e(c),s=[...i.comments,l];await o(c,{id:i.id,title:i.title,text:i.text,comments:s}),a.target.elements[0].value="",await t(n)}}),document.querySelector("#createPostForm").addEventListener("submit",async e=>{e.preventDefault();let o=e.target.elements.nameCollect.value,l=e.target.elements.discriptionCollect.value;await i({title:o,text:l,comments:[]}),e.target.elements.discriptionCollect.value="",e.target.elements.nameCollect.value="",await t(n),await a}),l(),console.log(document.querySelector("#postsContainer"));
//# sourceMappingURL=js2-project-async.7c5b7767.js.map
